<%- include('../partials/header', { title: 'Survey Details', user: user }) %>

<div class="page-header">
  <div class="container">
    <h1><i class="bi bi-clipboard-data-fill"></i> Survey Details</h1>
    <p>View participant feedback and satisfaction scores</p>
  </div>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card">
        <h3 class="mb-4">Survey #<%= survey.surveyid %></h3>

        <!-- Event Information -->
        <div class="mb-4">
          <h5 class="border-bottom pb-2 mb-3">
            <i class="bi bi-calendar-event"></i> Event Information
          </h5>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Event Name:</strong>
            </div>
            <div class="col-md-8"><%= survey.eventname || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Event Type:</strong>
            </div>
            <div class="col-md-8">
              <% if (survey.eventtype) { %>
                <span class="badge bg-info"><%= survey.eventtype %></span>
              <% } else { %>
                —
              <% } %>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Description:</strong>
            </div>
            <div class="col-md-8"><%= survey.eventdescription || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Date & Time:</strong>
            </div>
            <div class="col-md-8">
              <% if (survey.eventdatetimestart) { %>
                <%= new Date(survey.eventdatetimestart).toLocaleString('en-US', {
                  year: 'numeric',
                  month: 'long',
                  day: 'numeric',
                  hour: '2-digit',
                  minute: '2-digit'
                }) %>
                <% if (survey.eventdatetimeend) { %>
                  <br><small class="text-muted">to <%= new Date(survey.eventdatetimeend).toLocaleString('en-US', {
                    hour: '2-digit',
                    minute: '2-digit'
                  }) %></small>
                <% } %>
              <% } else { %>
                —
              <% } %>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Location:</strong>
            </div>
            <div class="col-md-8"><%= survey.eventlocation || '—' %></div>
          </div>
        </div>

        <h5 class="border-bottom pb-2 mb-3">
          <i class="bi bi-clipboard-data"></i> Survey Scores
        </h5>

        <div class="row mb-3">
          <div class="col-md-6 mb-3">
            <div class="stat-card">
              <i class="bi bi-emoji-smile"></i>
              <h3>Satisfaction</h3>
              <p class="stat-number"><%= survey.surveysatisfactionscore || '—' %></p>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="stat-card">
              <i class="bi bi-lightbulb"></i>
              <h3>Usefulness</h3>
              <p class="stat-number"><%= survey.surveyusefulnessscore || '—' %></p>
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6 mb-3">
            <div class="stat-card">
              <i class="bi bi-person-check"></i>
              <h3>Instructor</h3>
              <p class="stat-number"><%= survey.surveyinstructorscore || '—' %></p>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <div class="stat-card">
              <i class="bi bi-hand-thumbs-up"></i>
              <h3>Recommendation</h3>
              <p class="stat-number"><%= survey.surveyrecommendationscore || '—' %></p>
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-12">
            <div class="stat-card">
              <i class="bi bi-star-fill"></i>
              <h3>Overall Score</h3>
              <p class="stat-number" style="font-size: 3rem;"><%= survey.surveyoverallscore || '—' %></p>
            </div>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <p><strong><i class="bi bi-calendar-check"></i> Submission Date:</strong>
              <% if (survey.surveysubmissiondate) { %>
                <%= new Date(survey.surveysubmissiondate).toLocaleString('en-US', {
                  year: 'numeric',
                  month: 'short',
                  day: 'numeric',
                  hour: '2-digit',
                  minute: '2-digit'
                }) %>
              <% } else { %>
                —
              <% } %>
            </p>
          </div>
          <div class="col-md-6">
            <p><strong><i class="bi bi-ticket-detailed"></i> Registration ID:</strong> <%= survey.registrationid || '—' %></p>
          </div>
        </div>

        <hr>

        <div class="d-grid gap-2 d-md-flex">
          <a href="/surveys" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Back to Surveys
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer-scripts') %>
