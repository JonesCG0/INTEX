<%- include('../partials/header', { title: 'Event Details', user: user }) %>

<div class="page-header">
  <div class="container">
    <h1><i class="bi bi-calendar-event-fill"></i> Event Details</h1>
    <p>View event information and registration details</p>
  </div>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card">
        <h3 class="mb-4"><%= event.eventname || 'Untitled Event' %></h3>

        <div class="row mb-3">
          <div class="col-md-6">
            <p>
              <strong><i class="bi bi-hash"></i> ID:</strong> <%=
              event.eventoccurrenceid %>
            </p>
            <p>
              <strong><i class="bi bi-tag-fill"></i> Type:</strong>
              <span class="badge bg-info"><%= event.eventtype || '—' %></span>
            </p>
            <p>
              <strong><i class="bi bi-geo-alt-fill"></i> Location:</strong> <%=
              event.eventlocation || '—' %>
            </p>
          </div>
          <div class="col-md-6">
            <p>
              <strong><i class="bi bi-calendar-check"></i> Start:</strong>
              <% if (event.eventdatetimestart) { %> <%= new
              Date(event.eventdatetimestart).toLocaleString('en-US', { year:
              'numeric', month: 'short', day: 'numeric', hour: '2-digit',
              minute: '2-digit' }) %> <% } else { %> — <% } %>
            </p>
            <p>
              <strong><i class="bi bi-calendar-x"></i> End:</strong>
              <% if (event.eventdatetimeend) { %> <%= new
              Date(event.eventdatetimeend).toLocaleString('en-US', { year:
              'numeric', month: 'short', day: 'numeric', hour: '2-digit',
              minute: '2-digit' }) %> <% } else { %> — <% } %>
            </p>
            <p>
              <strong
                ><i class="bi bi-clock"></i> Registration Deadline:</strong
              >
              <% if (event.eventregistrationdeadline) { %> <%= new
              Date(event.eventregistrationdeadline).toLocaleString('en-US', {
              year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit',
              minute: '2-digit' }) %> <% } else { %> — <% } %>
            </p>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <p>
              <strong><i class="bi bi-people"></i> Capacity:</strong> <%=
              event.eventcapacity || '—' %>
            </p>
          </div>
          <div class="col-md-6">
            <p>
              <strong><i class="bi bi-arrow-repeat"></i> Recurrence:</strong>
              <%= event.eventrecurrencepattern || '—' %>
            </p>
          </div>
        </div>

        <% if (event.eventdescription) { %>
        <div class="mb-3">
          <p>
            <strong><i class="bi bi-file-text"></i> Description:</strong>
          </p>
          <p class="text-muted"><%= event.eventdescription %></p>
        </div>
        <% } %>

        <hr />

        <div class="d-grid gap-2 d-md-flex">
          <% if (user && user.role === 'admin') { %>
          <a
            href="/events/<%= event.eventoccurrenceid %>/edit"
            class="btn btn-primary"
          >
            <i class="bi bi-pencil-fill"></i> Edit Event
          </a>
          <form
            action="/events/<%= event.eventoccurrenceid %>/delete"
            method="POST"
            onsubmit="return confirm('Delete event \"<%= event.eventname %>\"? This cannot be undone.');"
          >
            <button type="submit" class="btn btn-danger">
              <i class="bi bi-trash-fill"></i> Delete Event
            </button>
          </form>
          <% } %>
          <a href="/events" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Back to Events
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer-scripts') %>
