<%- include('../partials/header', { title: 'My Profile', user: user }) %>

<div class="page-header">
  <div class="container">
    <h1><i class="bi bi-person-circle"></i> My Profile</h1>
    <p>View your account information</p>
  </div>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card">
        <div class="text-center mb-4">
          <% if (userRecord.photo) { %>
          <img
            src="<%= userRecord.photo %>"
            alt="Profile photo"
            style="
              width: 150px;
              height: 150px;
              border-radius: 50%;
              object-fit: cover;
              border: 5px solid var(--accent-color);
              box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            "
          />
          <% } else { %>
          <div
            style="
              width: 150px;
              height: 150px;
              border-radius: 50%;
              background-color: var(--pink-bg);
              display: inline-flex;
              align-items: center;
              justify-content: center;
              border: 5px solid var(--accent-color);
            "
          >
            <i
              class="bi bi-person-fill"
              style="font-size: 80px; color: var(--accent-color)"
            ></i>
          </div>
          <% } %>
        </div>

        <!-- Account Information -->
        <div class="mb-4">
          <h5 class="border-bottom pb-2 mb-3">
            <i class="bi bi-person-badge"></i> Account Information
          </h5>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Username:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.username || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>User ID:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.userid || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Role:</strong>
            </div>
            <div class="col-md-8">
              <span
                class="badge bg-<%= userRecord.userrole === 'admin' ? 'danger' : 'info' %>"
              >
                <%= userRecord.userrole === 'admin' ? 'Administrator' : 'Participant' %>
              </span>
            </div>
          </div>
        </div>

        <!-- Personal Information -->
        <div class="mb-4">
          <h5 class="border-bottom pb-2 mb-3">
            <i class="bi bi-person"></i> Personal Information
          </h5>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>First Name:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.userfirstname || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Last Name:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.userlastname || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Email:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.useremail || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Date of Birth:</strong>
            </div>
            <div class="col-md-8">
              <% if (userRecord.userdob) { %>
                <%= new Date(userRecord.userdob).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) %>
              <% } else { %>
                —
              <% } %>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Phone:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.userphone || '—' %></div>
          </div>
        </div>

        <!-- Address Information -->
        <div class="mb-4">
          <h5 class="border-bottom pb-2 mb-3">
            <i class="bi bi-geo-alt"></i> Address
          </h5>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>City:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.usercity || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>State:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.userstate || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>ZIP Code:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.userzip || '—' %></div>
          </div>
        </div>

        <!-- Additional Information -->
        <div class="mb-4">
          <h5 class="border-bottom pb-2 mb-3">
            <i class="bi bi-info-circle"></i> Additional Information
          </h5>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>School/Employer:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.userschooloremployer || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Field of Interest:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.userfieldofinterest || '—' %></div>
          </div>
        </div>

        <!-- Guardian Information -->
        <% if (userRecord.guardianfirstname || userRecord.guardianlastname || userRecord.guardianemail) { %>
        <div class="mb-4">
          <h5 class="border-bottom pb-2 mb-3">
            <i class="bi bi-shield-check"></i> Guardian Information
          </h5>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Guardian First Name:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.guardianfirstname || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Guardian Last Name:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.guardianlastname || '—' %></div>
          </div>
          <div class="row mb-2">
            <div class="col-md-4">
              <strong>Guardian Email:</strong>
            </div>
            <div class="col-md-8"><%= userRecord.guardianemail || '—' %></div>
          </div>
        </div>
        <% } %>

        <div class="d-grid gap-2 d-md-flex">
          <a href="/profile/edit" class="btn btn-primary">
            <i class="bi bi-pencil-fill"></i> Edit Profile
          </a>
          <a href="/" class="btn btn-secondary">
            <i class="bi bi-house-fill"></i> Back to Home
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer-scripts') %>
